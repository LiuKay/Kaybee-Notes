import{_ as r}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as n,c as o,a as e,e as i,b as a,d as c,r as s}from"./app.acc1cb71.js";const l={},p=a("\u53C2\u8003\uFF1A"),m={href:"https://dzone.com/articles/best-practices-java-memory-arguments-for-container",target:"_blank",rel:"noopener noreferrer"},d=a("Best Practices: Java Memory Arguments for Containers - DZone Java"),x=c('<p><strong>TL;DR</strong></p><p>\u7B80\u800C\u8A00\u4E4B\uFF0C\u5728\u5BB9\u5668\u5185\u67093\u7EC4\u53C2\u6570\u6765\u8BBE\u7F6E JVM \u7684\u6700\u5927\u5806\u5185\u5B58\uFF1A</p><ol><li>-XX:MaxRAMFraction, -XX:MinRAMFraction</li><li>-XX:MaxRAMPercentage, -XX:MinRAMPercentage</li><li>-Xmx</li></ol><p>\u5E94\u8BE5\u600E\u4E48\u4F7F\u7528\uFF1F</p><h2 id="_1-xx-maxramfraction-xx-minramfraction" tabindex="-1"><a class="header-anchor" href="#_1-xx-maxramfraction-xx-minramfraction" aria-hidden="true">#</a> 1 -XX:MaxRAMFraction, -XX:MinRAMFraction</h2><div class="custom-container tip"><p class="custom-container-title">\u652F\u6301\u7248\u672C\uFF1Aonly Java 8 update 131 to Java 8 update 190</p></div><p>\u5C40\u9650\uFF1A</p><ol><li>\u540C\u65F6\u8981\u8BBE\u7F6E\u53C2\u6570<code>-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap</code>\uFF0C\u4EE3\u8868 JVM \u5C06\u4EE5\u5BB9\u5668\u7684\u5185\u5B58\u8BBE\u7F6E\u4E3A\u51C6\u6765\u5206\u914D\u6700\u5927\u5806\u5185\u5B58\uFF0C\u4E0D\u7136\u5C31\u4F1A\u4EE5\u5BBF\u4E3B\u673A\u7684\u5185\u5B58\u4E3A\u51C6\u5206\u914D\u6700\u5927\u5806\u5185\u5B58</li><li>-XX:MaxRAMFraction \u53EA\u80FD\u8BC6\u522B\u6574\u6570\u7684\u8BBE\u7F6E\uFF0C\u5982\u679C\u8BBE\u7F6E<code>-XX:MaxRAMFraction=2.5</code>\u5C06\u4F1A\u65E0\u6CD5\u542F\u52A8 JVM</li><li>\u540E\u7EED\u7684 JDK \u7248\u672C\u5C31\u4E0D\u652F\u6301\u4E86</li></ol><p>\u4E3E\u4F8B\uFF1A</p><p>\u5982\u679C\u5BB9\u5668\u5206\u914D\u5185\u5B58\u4E3A 1GB, \u8BBE\u7F6E -XX:MaxRAMFraction=2\uFF0C\u5219 JVM \u6700\u5927\u5806\u5185\u5B58\u5206\u914D\u7EA6\u4E3A\u6700\u5927\u53EF\u7528\u5185\u5B58\u7684 1/2(\u7EA6512G).</p><h2 id="_2-xx-maxrampercentage-xx-minrampercentage" tabindex="-1"><a class="header-anchor" href="#_2-xx-maxrampercentage-xx-minrampercentage" aria-hidden="true">#</a> 2 -XX:MaxRAMPercentage, -XX:MinRAMPercentage</h2><div class="custom-container tip"><p class="custom-container-title">\u652F\u6301\u7248\u672C\uFF1Afrom Java 8 update 191 and above.</p></div><p><code>-XX:+UseContainerSupport</code>\u8FD9\u4E2A\u53C2\u6570\u8FD9\u8FD9\u4E9B\u652F\u6301\u7684\u7248\u672C\u4E2D\u5DF2\u7ECF\u9ED8\u8BA4\u5F00\u542F\u4E86\uFF0C\u4E0D\u9700\u8981\u518D\u663E\u793A\u8BBE\u7F6E\u3002</p><p>\u5C40\u9650\uFF1A\u4E0D\u652F\u6301\u66F4\u8001\u7684\u7248\u672C</p><p>\u4E3E\u4F8B\uFF1A</p><p>\u5982\u679C\u5BB9\u5668\u5206\u914D\u5185\u5B58\u4E3A 1GB, \u8BBE\u7F6E -XX:MaxRAMPercentage=50\uFF0C\u5219 JVM\u6700\u5927\u5806\u4E3A 1GB*50%</p><h2 id="_3-xmx" tabindex="-1"><a class="header-anchor" href="#_3-xmx" aria-hidden="true">#</a> 3 -Xmx</h2><p>\u76F4\u63A5\u8BBE\u7F6E JVM \u7684\u6700\u5927\u5806\u5185\u5B58\u503C</p><div class="custom-container tip"><p class="custom-container-title">\u652F\u6301\u7248\u672C\uFF1Aall</p></div><p>\u5C40\u9650\uFF1A</p><ol><li>\u5982\u679C\u4F60\u76F4\u63A5\u4F7F\u7528 -Xmx \u6765\u8BBE\u7F6E\u6700\u5927\u5806\u5185\u5B58\uFF0C\u5F53 JVM \u5185\u5B58\u8D85\u8FC7 \u5BB9\u5668\u7684\u5185\u5B58\u9650\u5236\uFF0C\u4F1A\u9047\u5230 OOM \u6216\u76F4\u63A5\u88AB Kill\u6389</li></ol><h2 id="\u5B9E\u8DF5\u5EFA\u8BAE" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u8DF5\u5EFA\u8BAE" aria-hidden="true">#</a> \u5B9E\u8DF5\u5EFA\u8BAE</h2><ol><li>\u4E0D\u7BA1\u600E\u4E48\u8BBE\u7F6E\u6700\u5927\u5806\u7684\u5185\u5B58\uFF0C\u8BB0\u5F97\u7559\u81F3\u5C11 25% \u6216\u66F4\u591A\u7684\u5185\u5B58\uFF0C\u56E0\u4E3AJVM \u8FD0\u884C\u65F6\u4E0D\u6B62\u6709\u5806\u5185\u5B58\uFF0C\u8FD8\u6709\u6BCF\u4E2A\u7EBF\u7A0B\u6808\uFF0C\u5185\u5730\u5185\u5B58\uFF0Csocket buffer \u7B49\u7B49\u5185\u5B58\u6D88\u8017</li><li>\u5982\u679C\u4E00\u4E2A\u5BB9\u5668\u91CC\u9762\u53EA\u6709\u4E00\u4E2A Java \u5E94\u7528\u5728\u8DD1\uFF0C\u628A\u521D\u59CB\u5806\u5927\u5C0F\u548C\u6700\u5927\u5806\u5927\u5C0F\u8BBE\u7F6E\u4E3A\u4E00\u6837\uFF0C\u907F\u514D JVM\u6269\u5BB9\u5BFC\u81F4 JVM \u6682\u505C\u3002\u5982\u679C\u521D\u59CB\u5185\u5B58\u8BBE\u7F6E\u7684\u5185\u5B58\u5927\u4E8E\u5BB9\u5668\u9650\u5236\uFF0CJVM \u751A\u81F3\u4E0D\u4F1A\u542F\u52A8\uFF0C\u5728\u4E00\u5F00\u59CB\u5C31\u53D1\u73B0\u95EE\u9898</li></ol>',23);function M(h,X){const t=s("ExternalLinkIcon");return n(),o("div",null,[e("p",null,[p,e("a",m,[d,i(t)])]),x])}const f=r(l,[["render",M],["__file","jvm-memory-in-container.html.vue"]]);export{f as default};
